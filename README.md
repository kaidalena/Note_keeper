# Сервис для хранения заметок в памяти

## Описание

HTTP-server, который предоставляет API для хранения заметок в памяти.
Все операции над заметками могут быть выполнены только после авторизации пользователя.
После авторизации пользователь имеет доступ только к своим заметкам.

В ветке **_main_** лежит реализация проекта при помощи json-файла, а в ветке **_with_db_** реализация с базой данных PostgreSQL.  

### API

Актуальная документация API представлена на [SwaggerHub little_coon](https://app.swaggerhub.com/apis/little_coon/note_keeper/1.0.0)

- авторизация пользователя (по логину и паролю)
- добавление заметки
- удаление заметки
- показ всех сохраненных заметок в виде списка (сортированного по времени добавления, от самых новых),
- получения первой добавленной заметки
- получение последней добавленной заметки

## Запуск

### Docker

Для запуска в Docker достаточно перейти в папку проекта и запустить файл docker-compose :

```
cd /note_keeper
docker-compose up --build
```

В файле **Dockerfile** описан запуск этого проекта, а в файле **docker-compose.yml** описан запуск docker-образов (в зависимости от ветки).
После запуска проекта в докере, по адресу http://localhost:8080 будет доступно API проекта.

**_Пароль "pwd" = hash "9003d1df22eb4d3820015070385194c8"_**

### Компиляция .exe

Сначала необходимо:

- установить все необходимые пакеты и зависимости (описано в Dockerfile):

```
go get -u github.com/lib/pq@v1.10.2
go mod tidy
```

- создать базу данных и пользователя БД согласна .env

Чтобы скомпилировать и запустить **сервер** необходимо перейти в папку проекта и выполнить следующую команду:

```
go run .
```

По умолчанию сервер обращается к БД по localhost. Чтобы изменить адрес к БД необходимо указать в переменной окружения DB_HOST необходимый адрес.
После запуска сервер будет доступен по адресу http://localhost:8080
